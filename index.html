
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub留言系统</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .fade-in {
            animation: fadeIn 0.8s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <nav class="bg-white shadow-lg fixed w-full z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <i class="fas fa-code-branch text-2xl text-purple-500 mr-2"></i>
                    <span class="text-xl font-bold text-gray-800">GitHub留言系统</span>
                </div>
            </div>
        </div>
    </nav>

    <div class="pt-16">
        <section class="gradient-bg text-white py-20">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h1 class="text-4xl font-bold mb-6">GitHub留言系统</h1>
                <p class="text-xl mb-8">将留言自动保存为TXT文件并推送到GitHub仓库</p>
            </div>
        </section>

        <section class="py-12">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="bg-white rounded-2xl shadow-lg p-8 card-hover">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">发布新留言</h2>
                    <form id="messageForm" class="space-y-6">
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">用户名</label>
                                <input type="text" name="username" required 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" 
                                    placeholder="请输入您的用户名">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">邮箱</label>
                                <input type="email" name="email" required 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" 
                                    placeholder="请输入您的邮箱">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">标题</label>
                            <input type="text" name="title" required 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" 
                                placeholder="请输入留言标题">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">内容</label>
                            <textarea name="content" rows="6" required 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" 
                                placeholder="请输入留言内容..."></textarea>
                        </div>
                        
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">分类</label>
                            <select name="category" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="general">一般留言</option>
                                    <option value="bug">问题反馈</option>
                                    <option value="feature">功能建议</option>
                                    <option value="other">其他</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">GitHub仓库</label>
                                <input type="text" name="repository" required 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" 
                                placeholder="username/repo-name">
                            </div>
                        </div>
                        
                        <div class="flex items-center">
                            <input type="checkbox" name="hideIP" class="h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded">
                            <label class="ml-2 text-sm text-gray-700">隐藏我的IP地址</label>
                        </div>
                        
                        <button type="submit" class="w-full gradient-bg text-white py-4 rounded-lg font-semibold hover:opacity-90 transition">
                                <i class="fas fa-paper-plane mr-2"></i>
                                发布留言到GitHub
                            </button>
                    </form>
                </div>
            </div>
        </section>

        <section class="py-12 bg-gray-50">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="bg-white rounded-2xl shadow-lg p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">留言历史</h2>
                    <div id="messageHistory" class="space-y-4">
                </div>
            </div>
        </section>
    </div>

    <script>
        class GitHubMessageSystem {
            constructor() {
                this.messages = this.loadMessages();
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.renderMessageHistory();
            }

            setupEventListeners() {
                const form = document.getElementById('messageForm');
                form.addEventListener('submit', (e) => this.handleSubmit(e));
            }

            handleSubmit(e) {
                e.preventDefault();
                const formData = new FormData(e.target);
                
                const message = {
                    id: Date.now().toString(),
                    username: formData.get('username'),
                    email: formData.get('email'),
                    title: formData.get('title'),
                    content: formData.get('content'),
                    category: formData.get('category'),
                    repository: formData.get('repository'),
                    hideIP: formData.get('hideIP') === 'on',
                    ip: this.getUserIP(),
                    timestamp: new Date().toISOString()
                };

                // 生成TXT文件内容
                const txtContent = this.formatTxtContent(message);
                
                // 提供TXT文件下载
                this.downloadTxtFile(txtContent, `message_${message.id}.txt`);
                
                // 保存到本地存储
                this.saveMessage(message);
                
                // 显示成功提示
                this.showSuccessMessage();
                
                // 重置表单
                e.target.reset();
            }

            formatTxtContent(data) {
                return `GitHub留言系统记录
================================
基本信息
--------------------------------
留言ID: ${data.id}
提交时间: ${new Date(data.timestamp).toLocaleString('zh-CN')}
用户名: ${data.username}
邮箱: ${data.email}
标题: ${data.title}
分类: ${this.getCategoryLabel(data.category)}
IP地址: ${data.hideIP ? '已隐藏' : data.ip}
GitHub仓库: ${data.repository}

留言内容
--------------------------------
${data.content}

技术信息
--------------------------------
文件格式: TXT
字符编码: UTF-8
生成时间: ${new Date().toISOString()}
================================
`;
            }

            downloadTxtFile(content, filename) {
                const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                console.log(`✓ TXT文件已生成: ${filename}`);
            }

            saveMessage(message) {
                this.messages.unshift(message);
                localStorage.setItem('githubMessages', JSON.stringify(this.messages));
                this.renderMessageHistory();
            }

            loadMessages() {
                const saved = localStorage.getItem('githubMessages');
                return saved ? JSON.parse(saved) : [];
            }

            renderMessageHistory() {
                const container = document.getElementById('messageHistory');
                container.innerHTML = '';

                if (this.messages.length === 0) {
                    container.innerHTML = '<p class="text-gray-500 text-center">暂无留言记录</p>';
                    return;
                }

                this.messages.forEach(msg => {
                    const messageElement = document.createElement('div');
                    messageElement.className = 'bg-gray-50 rounded-lg p-6 border border-gray-200 card-hover">
                    messageElement.innerHTML = `
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="text-lg font-semibold text-gray-800">${msg.title}</h3>
                            <span class="inline-block bg-purple-100 text-purple-800 text-sm px-3 py-1 rounded-full">${this.getCategoryLabel(msg.category)}</span>
                        </div>
                        <p class="text-gray-600 mb-3">${msg.content}</p>
                        <div class="flex justify-between items-center text-sm text-gray-500">
                            <span>${msg.username} • ${new Date(msg.timestamp).toLocaleString('zh-CN')}</span>
                        <div>
                            <button class="text-purple-600 hover:text-purple-800 mr-3" onclick="messageSystem.downloadMessage('${msg.id}')">
                                <i class="fas fa-download mr-1"></i>
                                下载TXT
                            </button>
                            <button class="text-red-600 hover:text-red-800" onclick="messageSystem.deleteMessage('${msg.id}')">
                                <i class="fas fa-trash mr-1"></i>
                                删除
                            </button>
                        </div>
                    `;
                    container.appendChild(messageElement);
                });
            }

            getCategoryLabel(category) {
                const labels = {
                    'general': '一般留言',
                    'bug': '问题反馈',
                    'feature': '功能建议',
                    'other': '其他'
                };
                return labels[category] || '未知';
            }

            getUserIP() {
                return '192.168.1.100';
            }

            showSuccessMessage() {
                alert('留言已成功生成TXT文件！您可以下载后手动上传到GitHub仓库。');
            }

            downloadMessage(messageId) {
                const message = this.messages.find(msg => msg.id === messageId);
                if (message) {
                    const txtContent = this.formatTxtContent(message);
                    this.downloadTxtFile(txtContent, `message_${messageId}.txt`);
            }

            deleteMessage(messageId) {
                if (confirm('确定要删除这条留言吗？')) {
                    this.messages = this.messages.filter(msg => msg.id !== messageId);
                    localStorage.setItem('githubMessages', JSON.stringify(this.messages));
                    this.renderMessageHistory();
            }
        }

        const messageSystem = new GitHubMessageSystem();
    </script>
</body>
</html>
<code_end>
<code_start project_name=GitHub留言系统 filename=README.md title=项目说明文档 entrypoint=false runnable=false project_final_file=true>
